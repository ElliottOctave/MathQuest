<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Customize Your Zoo - MathQuest</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="styles/style.css">
  <link rel="stylesheet" href="styles/mathQuest.css">
  <style>
    /* Copy all relevant CSS from rewards.html */
    /* Add the styles here */
    html,
    body {
      height: 100%;
      margin: 0;
      padding: 0;
    }

    body {
      display: flex;
      flex-direction: column;
      background-color: #eee;
    }

    main {
      flex: 1;
      display: flex;
      overflow: hidden;
      margin: 0;
      padding: 0;
    }

    aside {
      width: 800px;
      background-color: #f7f7f7;
      padding: 1rem;
      overflow-y: auto;
      border-right: 2px solid #ccc;
    }

    section {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 0.5rem;
    }

    #zoo-container {
      flex: 1;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      height: 100%;
    }

    #zoo-image {
      height: 100%;
      width: auto;
      max-height: 100%;
      display: block;
      pointer-events: none;
      z-index: 1;
    }

    #zoo {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 100%;
      z-index: 2;
    }

    .zoo-animal {
      position: absolute;
      width: 80px;
      cursor: grab;
      z-index: 10;
      transition: left 0.25s ease, top 0.25s ease, transform 0.2s ease;
    }

    .animal-img {
      filter: grayscale(100%);
      transition: filter 0.3s ease;
    }

    .animal-img.owned {
      filter: none;
    }

    .animal-card {
      width: 100%;
      text-align: center;
      padding: 10px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 10px;
    }

    #zoo-guide {
      position: absolute;
      left: 0;
      width: 100%;
      height: 25%;
      bottom: 0;
      background: rgba(0, 255, 0, 0.15);
      border-top: 2px dashed #28a745;
      display: none;
      pointer-events: none;
      z-index: 5;
    }

    footer {
      background: #222;
      color: white;
      text-align: center;
      padding: 10px;
    }

    .zoo-heading {
      font-family: 'Comic Sans MS', cursive, sans-serif;
      font-size: 2rem;
      color: #2c3e50;
      background: linear-gradient(to right, #ffde59, #ff914d);
      padding: 8px 16px;
      border-radius: 12px;
      display: inline-block;
      box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.1);
    }

    .zoo-clear {
      font-weight: bold;
      border-radius: 10px;
      box-shadow: 1px 2px 5px rgba(0, 0, 0, 0.15);
      padding: 8px 16px;
      transition: background-color 0.2s ease;
    }

    .zoo-clear:hover {
      background-color: #e67e22;
      color: white;
    }

    .btn-row {
      display: flex;
      justify-content: flex-end;
      gap: 0.5rem;
      margin-top: 8px;
    }

    .animal-card button {
      white-space: nowrap;
    }

    .animal-card {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 10px;
    }
  </style>
</head>

<body>

  <!-- Load header dynamically -->
  <div id="header"></div>

  <!-- Main Content -->
  <main>
    <aside>
      <h2 class="zoo-heading text-center">üêæ Animal Shop</h2>
      <div id="shop"></div>
    </aside>

    <section>
      <div class="d-flex justify-content-between align-items-center mb-2">
        <h2 class="zoo-heading">ü¶ì Your Zoo</h2>
        <button class="btn btn-warning btn-lg zoo-clear" onclick="resetZoo()">üóëÔ∏è Clear Zoo</button>
      </div>
      <div id="zoo-container">
        <img id="zoo-image" src="assets/animals/zoo.jpg" alt="Zoo">
        <div id="zoo" ondragover="event.preventDefault()">
          <div id="zoo-guide"></div>
        </div>
      </div>

    </section>
  </main>

  <!-- Footer -->
  <div id="footer"></div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const animals = [
      { name: 'bear', img: 'bear.webp', price: 10, displayName: 'Benny the Bear' },
      { name: 'fox', img: 'fox.png', price: 10, displayName: 'Foxy the Fox' },
      { name: 'zuri', img: 'zuri.png', price: 10, displayName: 'Zuri the Zebra' },
      { name: 'professor', img: 'professor.png', price: 10, displayName: 'Professor Puzzlo' },
      { name: 'rabbit', img: 'rabbit.webp', price: 10, displayName: 'Ruby the Rabbit' },
      { name: 'cooper', img: 'cooper.png', price: 10, displayName: 'Captain Cooper' },
      { name: 'lemur', img: 'lemur.webp', price: 10, displayName: 'Leo the Lemur' },
      { name: 'timmy', img: 'timmy.webp', price: 10, displayName: 'Timmy the Turtle' },
      { name: 'dot', img: 'dot.png', price: 10, displayName: 'Detective Dog' }
    ];

    let userPoints = 100;
    const ownedAnimals = {};
    const shopEl = document.getElementById('shop');
    const zooEl = document.getElementById('zoo');

    function resetZoo() {
      document.querySelectorAll('.zoo-animal').forEach(a => a.remove());
    }

    animals.forEach(animal => {
      const wrapper = document.createElement('div');
      wrapper.className = 'animal-card d-flex align-items-center justify-content-between';

      const infoCol = document.createElement('div');
      infoCol.className = 'd-flex align-items-center';

      const img = document.createElement('img');
      img.src = `assets/animals/${animal.img}`;
      img.alt = animal.name;
      img.width = 80;
      img.classList.add('animal-img', 'me-3');

      const label = document.createElement('div');
      label.textContent = animal.displayName;
      label.className = 'fw-bold';

      infoCol.appendChild(img);
      infoCol.appendChild(label);

      const btnBuy = document.createElement('button');
      btnBuy.className = 'btn btn-primary btn-sm';
      btnBuy.innerText = `Buy (${animal.price} pts)`;

      const btnPlace = document.createElement('button');
      btnPlace.className = 'btn btn-success btn-sm';
      btnPlace.innerText = 'Place in Zoo';
      btnPlace.style.display = 'none';

      const btnContainer = document.createElement('div');
      btnContainer.className = 'btn-row';
      btnContainer.appendChild(btnBuy);
      btnContainer.appendChild(btnPlace);

      wrapper.appendChild(infoCol);
      wrapper.appendChild(btnContainer);
      shopEl.appendChild(wrapper);

      btnBuy.onclick = () => {
        if (userPoints >= animal.price && !ownedAnimals[animal.name]) {
          userPoints -= animal.price;
          ownedAnimals[animal.name] = true;
          img.classList.add('owned');
          btnBuy.disabled = true;
          btnBuy.className = 'btn btn-secondary btn-sm';
          btnBuy.innerText = 'Owned';
          btnPlace.style.display = 'inline-block';
        }
      };

      btnPlace.onclick = () => {
        if (document.getElementById(`zoo-${animal.name}`)) return;

        const zooAnimal = document.createElement('img');
        zooAnimal.src = `assets/animals/${animal.img}`;
        zooAnimal.className = 'zoo-animal';
        zooAnimal.id = `zoo-${animal.name}`;

        zooEl.appendChild(zooAnimal);
      };
    });
  </script>
  <script src="/pages/scripts/include.js"></script>
</body>

</html>
